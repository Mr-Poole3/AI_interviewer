# 变更日志 (CHANGELOG)

## [未发布] - 2025-01-27 16:15

### 修复 (Fixed)
- **语音界面背景样式优化** - 修复语音聊天按钮打开时背景模糊效果不生效的问题
  - 将语音界面背景改为纯白色，不透明度100%
  - 移除模糊效果和渐变背景，提供更清晰的视觉体验
  - 调整文字颜色适配白色背景（深色文字，移除文字阴影）
  - 优化语音控制按钮样式，增强在白色背景下的可见性和对比度
  - 简化CSS动画系统，移除冗余的.show类动画控制
  - 修改文件：`static/style.css`, `static/voice-call.js`

### 技术细节
- 修复CSS动画冲突问题（.voice-call-fullscreen的多重动画冲突）
- 移除backdrop-filter模糊效果，改为实色背景
- 统一按钮样式系统，使用标准阴影替代模糊效果

本文档记录Azure语音面试系统的所有重要变更和版本更新。

## [2.0.0] - 2025-06-14

### 🚀 重大重构 - Azure语音面试系统
**完全重构为基于Azure OpenAI实时语音模型的智能面试系统**

#### ✨ 新增功能
- **Azure OpenAI集成**: 使用Azure OpenAI实时语音模型替换所有语音功能
- **实时语音对话**: 支持语音输入和语音输出的完整语音面试体验
- **流式音频播放**: 边接收边播放，降低延迟提升用户体验
- **音频重播功能**: 生成完整WAV文件供用户重复播放
- **Azure主题UI**: 全新的Azure风格界面设计和交互体验
- **专用启动脚本**: `start_azure_voice_interview.py` 提供环境检查和服务启动

#### 🔄 重大变更
- **后端架构重构**: 
  - 移除 `llm.py`、`voice_chat.py`、`voice_integration.py`、`azure_realtime_client.py`
  - 重写 `backend/app.py` 为Azure语音服务架构
  - 新增 `AzureVoiceService` 类处理实时语音通信
  - WebSocket端点专门处理语音数据流传输

- **前端架构重构**:
  - 重写 `static/app.js` 专注Azure语音通信
  - 新增 `AzureVoiceChat` 类管理语音聊天
  - 更新 `static/index.html` 为Azure语音面试界面
  - 重构音频处理逻辑，支持PCM解码和WAV生成

- **依赖管理优化**:
  - 移除Gemini、FastRTC等不需要的依赖
  - 精简 `requirements.txt` 仅保留核心依赖
  - 专注Azure OpenAI SDK和基本Web框架

#### 🎨 UI/UX 改进
- **Azure主题设计**: 采用Azure蓝色主题和设计语言
- **语音交互优化**: 专为语音面试优化的界面布局
- **流式指示器**: 新增语音流式播放的视觉反馈
- **音频播放器**: 集成音频播放控件和重播功能
- **响应式设计**: 完美适配桌面端和移动端语音交互

#### 📚 文档更新
- **README完全重写**: 更新为Azure语音面试系统文档
- **新增日志规范**: 详细的Azure语音服务日志记录标准
- **故障排除指南**: Azure服务连接和音频播放问题解决方案
- **部署指南**: 生产环境和Docker部署说明

#### 🗑️ 移除功能
- 移除Gemini语音相关功能
- 移除FastRTC TTS引擎
- 移除多余的语音集成代码
- 清理不需要的依赖库

#### 🔧 技术改进
- **WebSocket音频流**: 实时双向语音通信
- **PCM音频处理**: 专业音频解码和WAV文件生成
- **音频队列管理**: 确保音频块连续播放
- **错误处理增强**: 完善的Azure服务错误处理
- **性能优化**: 优化音频传输和播放性能

#### 📊 日志规范
- **Azure服务调用日志**: 记录每次Azure OpenAI服务调用详情
- **WebSocket通信日志**: 记录语音数据传输和连接状态
- **音频处理日志**: 记录音频编解码和播放状态
- **错误追踪日志**: 关键错误自动记录便于排查

#### ⚠️ 破坏性变更
- **API接口变更**: WebSocket消息协议更新为语音数据格式
- **环境变量变更**: 需要配置Azure OpenAI相关环境变量
- **启动方式变更**: 使用新的启动脚本 `start_azure_voice_interview.py`
- **依赖要求变更**: 需要重新安装精简后的依赖包

#### 🚀 迁移指南
1. **环境配置**:
   ```bash
   export AZURE_OPENAI_API_KEY="your_azure_api_key"
   export AZURE_OPENAI_ENDPOINT="https://your-resource.openai.azure.com"
   ```

2. **依赖更新**:
   ```bash
   pip install -r requirements.txt
   ```

3. **启动服务**:
   ```bash
   python start_azure_voice_interview.py
   ```

#### 📈 性能提升
- **音频延迟降低**: 流式音频播放显著降低延迟
- **内存使用优化**: 移除多余依赖减少内存占用
- **启动速度提升**: 精简架构提升应用启动速度
- **网络效率**: 优化WebSocket音频数据传输

---

## [1.3.1] - 2024-12-XX
### 🎤 语音聊天界面优化
- 简化语音界面，移除用户语音转文本显示
- 优化音频呼吸灯效果，直观展示收音状态
- 极简控制设计，只保留结束通话按钮
- 响应式优化，提升移动端语音体验

## [1.3.0] - 2024-12-XX
### 🎯 多页面导航系统
- 全新顶部导航栏，支持多页面切换
- 面试历史记录管理功能
- 简历设置页面和文件管理
- localStorage数据持久化存储

## [1.2.1] - 2024-12-XX
### 🔧 面试官系统修复
- 修复面试官思考过程输出问题
- 优化等待机制和用户引导
- 完善错误处理和日志记录

## [1.2.0] - 2024-12-XX
### 🎨 飞书设计语言升级
- UI风格全面升级为飞书设计
- 新配色系统和设计规范
- 微动画增强和交互优化

## [1.1.0] - 2024-12-XX
### 📄 简历上传功能
- 支持PDF和Word格式文档上传
- 个性化面试体验
- 双Prompt架构设计

## [1.0.0] - 2024-12-XX
### 🚀 初始版本
- 基础LLM面试官功能
- WebSocket流式对话
- Chrome风格UI设计 